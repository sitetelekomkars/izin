<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Site Telekom Ä°zin Sistemi</title>

    <!-- PWA & Mobile App Settings -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0056b3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ä°zin Sistemi">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=12">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>

    <!-- PREMIUM LOGIN VIEW -->
    <div id="view-login" class="login-view">
        <div class="login-left"></div>
        <div class="login-right">
            <div class="auth-container">
                <img src="corporate-logo.png" alt="Site Telekom Logo" class="login-logo">
                <h1>HoÅŸ Geldiniz ðŸ‘‹</h1>
                <p class="auth-subtitle">Ä°zin yÃ¶netim sistemi.</p>
                <form onsubmit="handleLogin(event)" autocomplete="off">
                    <div class="form-group">
                        <label>KullanÄ±cÄ± AdÄ±</label>
                        <input type="text" id="username" placeholder="kullanici.adi" required>
                    </div>
                    <div class="form-group">
                        <label>Åžifre</label>
                        <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <button type="submit" class="btn-primary" id="btn-login">GiriÅŸ Yap</button>

                    <!-- NEW: Durum Bildirim AlanÄ± -->
                    <div id="login-status"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- DASHBOARD VIEW -->
    <div id="view-dashboard" class="app-container hidden">
        <div class="header-area">
            <div class="header-left" style="display:flex; align-items:center;">
                <img src="corporate-logo.png" alt="Logo" style="height:45px; margin-right:15px;">
                <h3 style="margin:0; font-weight:800; color:#1e293b;">Ä°zin YÃ¶netim Sistemi</h3>
            </div>

            <div class="user-menu-container">
                <div class="user-info" onclick="toggleUserMenu()">
                    <div id="userAvatar" class="user-avatar-placeholder">U</div>
                    <div style="display:flex; flex-direction:column; align-items:flex-start; line-height:1.2;">
                        <span id="displayUsername" style="font-weight:700; font-size:0.9rem;">User</span>
                        <span id="displayRole" style="font-size:0.75rem; color:#64748b;">Role</span>
                    </div>
                    <span style="font-size:0.7rem; color:#94a3b8; margin-left:5px;">â–¼</span>
                </div>
                <div id="userDropdown" class="dropdown-content">
                    <a id="menu-logs" onclick="openSystemLogs()"
                        style="display:none; color:#2563eb; font-weight:bold;">ðŸ“‹ Sistem LoglarÄ±</a>
                    <a id="menu-report" onclick="openReportModal()"
                        style="display:none; color:#10b981; font-weight:bold;">ðŸ“Š Excel Rapor</a>
                    <a id="menu-mgmt" onclick="openUserMgmtModal()" style="display:none;">ðŸ‘¥ Personel YÃ¶netimi</a>
                    <a id="menu-pass" onclick="promptChangePassword(false)">ðŸ”‘ Åžifre DeÄŸiÅŸtir</a>
                    <a onclick="logout()" class="logout-link">ðŸšª GÃ¼venli Ã‡Ä±kÄ±ÅŸ</a>
                </div>
            </div>
        </div>
        <div class="dashboard-view">
            <div id="dashboard-content"></div>
        </div>
    </div>

    <!-- iOS Install Prompt Modal -->
    <div id="ios-prompt" class="ios-prompt">
        <div class="ios-prompt-header">
            <img src="favicon.png" alt="App Icon">
            <div>
                <h4>UygulamayÄ± YÃ¼kleyin</h4>
                <p>Sistemi telefonunuzda uygulama olarak kullanmak iÃ§in:</p>
            </div>
        </div>
        <div class="ios-prompt-steps">
            <div class="ios-step"><span class="icon">âŽ‹</span> Safari PaylaÅŸ butonuna basÄ±n.</div>
            <div class="ios-step"><span class="icon">âŠž</span> "Ana Ekrana Ekle" seÃ§in.</div>
        </div>
        <button onclick="closeIosPrompt()" class="ios-close-btn">AnladÄ±m</button>
    </div>

    <div class="signature">Crafted by DoÄŸuÅŸ YalÃ§Ä±nkaya</div>
    <script src="app.js"></script>
</body>

</html>
